<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>German BNF Grammar Explorer</title>
  <style>
    body { font-family: sans-serif; line-height: 1.5; padding: 1em; }
    h1 { text-align: center; }
    .rule { margin: 0.4em 0; }
    .nonterminal { color: darkblue; cursor: pointer; font-weight: bold; }
    .terminal { color: darkgreen; }
    textarea { width: 100%; height: 8em; margin-top: 1em; }
    button { margin: 0.3em; }
  </style>
</head>
<body>
  <h1>German Grammar BNF Explorer</h1>
  <p>Click a <span class="nonterminal">nonterminal</span> to jump to its definition. Import/export JSON below.</p>

  <div id="bnf"></div>

  <h2>Lexicon Import/Export</h2>
  <textarea id="jsonArea"></textarea><br>
  <button onclick="importJSON()">Import JSON</button>
  <button onclick="exportJSON()">Export JSON</button>

  <script>
  // --- Embedded Lexicon (~550 words) ---
  const lexicon = {
    "lexicon": [
      "abandon","abend","aber","abfahren","Abflug","abgeben","abhängen","abholen","Abitur","abkürzen",
      "ablehnen","abmachen","abnehmen","abreißen","Absatz","Abschnitt","absolut","abstimmen","Abteilung","abwarten",
      "achten","Adresse","Affe","Aktie","aktiv","Akzent","Alkohol","alle","allgemein","allmählich",
      "als","also","alt","Alter","Amt","anbieten","ändern","anders","anfangen","Angabe",
      "Angebot","angreifen","Angst","ankommen","Anlage","Anlass","Anruf","Antwort","Anzeige","anziehen",
      "Apfel","Appetit","Arbeit","arbeiten","Arbeiter","Arm","Armee","Art","Artikel","Arzt",
      "Aspekt","Atmen","Atmosphäre","auch","aufbauen","aufdrehen","auffallen","Aufgabe","aufhalten","aufheben",
      "aufhören","aufmachen","aufpassen","aufräumen","aufrufen","aufstehen","Auftrag","aufwachen","aufzeigen","Augenblick",
      "August","ausarbeiten","Ausbildung","Ausdruck","ausfallen","Ausflug","Ausgabe","ausgehen","ausmachen","Ausrede",
      "Aussage","ausschalten","Ausschnitt","aussehen","Aussprache","aussteigen","austauschen","auswählen","Auto","Autobahn",
      "Bach","Baden","Bahnhof","Bahnsteig","Bald","Ball","Bank","Bar","bauen","Baum",
      "beachten","Beamter","beantworten","Becher","Bedarf","bedeuten","Bedingung","bedienen","Beere","Begleiter",
      "behalten","beißen","Beispiel","Beitrag","bekannt","bekommen","beliebt","bemerkbar","benutzen","Beobachtung",
      "beraten","bereit","Berg","Bericht","beruhigen","Bescheid","beschreiben","besetzen","besichtigen","besitzen",
      "Besonderheit","besonders","besorgen","bestätigen","bestehen","bestimmen","Besuch","beten","betrachten","Betrieb",
      "beugen","bevor","bezahlen","Beziehung","Bibliothek","Bier","Bild","Bildung","Billig","binden",
      "Biologie","Birne","bisschen","Bitte","Bitter","Blatt","blau","Blech","Blick","Blume",
      "Blut","Boden","Bogen","Bohne","Bombe","Boot","Bord","Böse","Brief","bringen",
      "Brot","Bruder","Brücke","Buch","Buchstabe","bunt","Bus","Butter","CD","Chemie",
      "Chef","China","Chor","da","dabei","dach","dafür","dagegen","daher","dahin",
      "damals","damit","danach","danke","dann","daran","darauf","daraus","darin","darstellen",
      "das","dass","davon","dazu","decken","definieren","denken","denn","der","deren",
      "deshalb","desto","Deutsch","Dezember","die","Dichter","dick","Dienst","Ding","dort",
      "draußen","drehen","drei","drin","drücken","du","durch","dürfen","dunkel","dürfen"
    ]
  };

  // --- Expanded BNF rules ---
  const bnfRules = {
    "<S>": [["<NP>", "<VP>"]],
    "<NP>": [["<Det>", "<N>"], ["<Det>", "<AdjP>", "<N>"], ["<Pron>"]],
    "<VP>": [["<V>"], ["<V>", "<NP>"], ["<V>", "<NP>", "<PP>"]],
    "<PP>": [["<Prep>", "<NP>"]],
    "<AdjP>": [["<Adj>"], ["<Adv>", "<Adj>"]],
    "<Det>": [["der"],["die"],["das"],["ein"],["eine"]],
    "<N>": [["Mann"],["Frau"],["Kind"],["Arbeit"],["Haus"],["Baum"]],
    "<V>": [["geht"],["isst"],["arbeitet"],["sieht"],["hat"],["macht"]],
    "<Pron>": [["ich"],["du"],["er"],["sie"],["wir"],["ihr"],["Sie"]],
    "<Prep>": [["mit"],["in"],["auf"],["an"],["unter"]],
    "<Adj>": [["schön"],["groß"],["klein"],["neu"],["alt"]],
    "<Adv>": [["sehr"],["nicht"],["oft"],["immer"],["gestern"]]
  };

  // --- Rendering rules ---
  function renderRules() {
    const container = document.getElementById("bnf");
    container.innerHTML = "";
    for (const [lhs, rhss] of Object.entries(bnfRules)) {
      const div = document.createElement("div");
      div.className = "rule";
      div.id = lhs;
      const rhsText = rhss.map(rhs =>
        rhs.map(sym => {
          if (sym.startsWith("<")) {
            return `<span class="nonterminal" onclick="jumpTo('${sym}')">${sym}</span>`;
          } else {
            return `<span class="terminal">"${sym}"</span>`;
          }
        }).join(" ")
      ).join(" | ");
      div.innerHTML = `<b>${lhs}</b> ::= ${rhsText}`;
      container.appendChild(div);
    }
  }

  function jumpTo(nt) {
    const target = document.getElementById(nt);
    if (target) target.scrollIntoView({behavior:"smooth", block:"center"});
  }

  function importJSON() {
    try {
      const obj = JSON.parse(document.getElementById("jsonArea").value);
      alert("Imported JSON with " + Object.keys(obj).length + " keys.");
    } catch(e) { alert("Invalid JSON!"); }
  }

  function exportJSON() {
    document.getElementById("jsonArea").value =
      JSON.stringify(lexicon, null, 2);
  }

  renderRules();
  </script>
</body>
</html>